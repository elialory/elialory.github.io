const data = [
    {
        "title": "Katara",
        "nick": "My mother used to be on a bodypillow...",
        "description": "Gentle yet passionate, Katara uses waterbending for sensual experience. Her caring nature makes you feel desired.",
        "square_image": "Artworks/Katara/square.jpg",
        "vertical_image": "Artworks/Katara/vertical.jpg",
        "color": "water",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "Toph Beifong",
        "nick": "She bends: Earth, Metal, You.",
        "description": "Feisty and bold, Toph takes charge in bed. Her earthbending creates unique sensations, making you feel good.",
        "square_image": "Artworks/Toph/square.jpg",
        "vertical_image": "Artworks/Toph/vertical.jpg",
        "color": "earth",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "Azula",
        "nick": "Never stick it in crazy.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Azula/square.jpg",
        "vertical_image": "Artworks/Azula/vertical.jpg",
        "color": "fire",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "June",
        "nick": "Goth mommy with whip.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/June/square.jpg",
        "vertical_image": "Artworks/June/vertical.jpg",
        "color": "earth",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "Suki",
        "nick": "No really. How is Sokka doing it?",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Suki/square.jpg",
        "vertical_image": "Artworks/Suki/vertical.jpg",
        "color": "earth",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "Princess Yue",
        "nick": "That's rough buddy",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Yue/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "water",
        "stato": 2,
        "category": "Aang"
    },
    {
        "title": "Mai",
        "nick": "...",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Mai/square.jpg",
        "vertical_image": "Artworks/Mai/vertical.jpg",
        "color": "fire",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "Ty Lee",
        "nick": "Best Girl.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/TyLee/square.jpg",
        "vertical_image": "Artworks/TyLee/vertical.jpg",
        "color": "air",
        "stato": 1,
        "category": "Aang"
    },
    {
        "title": "Kya",
        "nick": "Southern Tribe's Milf.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Kya/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "water",
        "stato": 2,
        "category": "Aang"
    },
    {
        "title": "Ursa",
        "nick": "Too good for Ozai.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Ursa/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "fire",
        "stato": 2,
        "category": "Aang"
    },
    {
        "title": "Jo Dee",
        "nick": "There is no Rule34.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/JoDee/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "earth",
        "stato": 2,
        "category": "Aang"
    },
    {
        "title": "Jin",
        "nick": "REAL Best Girl",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Jin/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "earth",
        "stato": 2,
        "category": "Aang"
    },
    {
        "title": "Korra",
        "nick": "One of the top ten Tomboys ever made.",
        "description": "Powerful and Passionate, Korra uses bending for an intense experience. Dominant yet craves tenderness. A wild ride of pleasure.",
        "square_image": "Artworks/Korra/square.jpg",
        "vertical_image": "Artworks/Korra/vertical.jpg",
        "color": "water",
        "stato": 1,
        "category": "Korra",
    },
    {
        "title": "Opal Beifong",
        "nick": "Look... don't treat her bad. She's a good girl.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Opal/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "earth",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Pema",
        "nick": "4 kids. Still sexy. Best Milf.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Pema/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "air",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Lin Beifong",
        "nick": "Police Officer Roleplay.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Lin/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "earth",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Suyin Beifong",
        "nick": "I don't really know what to write here.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Suyin/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "earth",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Kya II",
        "nick": "Southern Tribe's Gilf.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Kya2/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "water",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Eska",
        "nick": "NOT DESKA!",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Eska/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "water",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Ming Wa",
        "nick": "I don't want to fix her. I want her to ruin me.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/MingWa/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "water",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "P'Li",
        "nick": "Zaheer has good taste.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Pli/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "fire",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Zhu Li Moon",
        "nick": "She did a thing for you.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/ZhuLi/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "water",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Kuvira",
        "nick": "VVhen she vvas there the trains arrived on time.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Kuvira/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "earth",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Asami Sato",
        "nick": "Korra's owner.",
        "description": "A dominant firebender, Azula demands submission. Her passion and skill leave you breathless, begging for more.",
        "square_image": "Artworks/Asami/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "fire",
        "stato": 2,
        "category": "Korra"
    },
    {
        "title": "Raava",
        "nick": "I surely shouldn't stick my dick there... however-",
        "description": "hah ah got it? No... Caus- nevermind",
        "square_image": "Artworks/Raava/square.jpg",
        "vertical_image": "Artworks/PlaceHolder/vertical.jpg",
        "color": "air",
        "stato": 2,
        "category": "Korra",
    }
];

const elementColors = {
    water: "#294364",
    fire: "#930706",
    air: "#FFA500",
    earth: "#005A00"
};

let sortOrder = "asc";       // A-Z o Z-A
let activeCategory = "All";  // Categoria attiva

const sortBtn = document.getElementById("sort-toggle");
const filterButtons = document.querySelectorAll('.filter-buttons button');
const container = document.getElementById('artworks-container');

document.addEventListener("DOMContentLoaded", () => {
    const loader = document.getElementById("loader");
    if (loader) {
        setTimeout(() => {
            loader.classList.add("hidden");
            setTimeout(() => loader.remove(), 800);
        }, 1500);
    }

    // Render iniziale dopo loader
    renderArtworks();
});

// Funzione unica di rendering
function renderArtworks(category = activeCategory) {
    
    activeCategory = category;

    container.innerHTML = "";

    let visibleIndex = 0;

    // Filtro
    let artworksToRender = data.filter(a => category === "All" || a.category === category);

    // Ordine
    artworksToRender.sort((a, b) => {
        if (a.stato !== b.stato) return a.stato - b.stato;
        const titleCompare = a.title.localeCompare(b.title);
        return sortOrder === "asc" ? titleCompare : -titleCompare;
    });

    artworksToRender.forEach(artwork => {
        const rowClass = visibleIndex % 2 === 0 ? 'row' : 'row reverse';
        const revealClass = visibleIndex % 2 !== 0 ? 'reveal right' : 'reveal left';

        const section = document.createElement('section');
        const baseColor = elementColors[artwork.color] || "#ffffff";

        section.style.background = `
            linear-gradient(rgba(255,255,255,0.2), rgba(0,0,0,0.1)),
            ${baseColor}
        `;

        section.className = `${rowClass} ${revealClass}`;
        
        section.innerHTML = `
            <div class="image-large">
                <img src="${artwork.vertical_image}" alt="${artwork.title}">
            </div>
            <div class="info-wrapper">
                <div class="info">
                    <p class="label">${artwork.title}</p>
                    <p class="epitet">${artwork.nick}</p>
                </div>
            </div>
        `;
        
        section.style.setProperty("--bg-img", `url(${artwork.square_image})`);
        container.appendChild(section);

        setTimeout(() => section.classList.add('visible'), visibleIndex * 100);
        visibleIndex++;
    });

    attachLightboxListeners();
}

// --- Listener filtri ---
filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        // Aggiorna classe active
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Aggiorna categoria attiva e render
        if (btn.dataset.category !== undefined) {
            activeCategory = btn.dataset.category;
        }
        
        renderArtworks(activeCategory);

        // Aggiorna bottone sort per riflettere stato corrente
        sortBtn.textContent = sortOrder === "asc" ? "A–Z" : "Z–A";
    });
});

// --- Listener toggle ordine ---
sortBtn.addEventListener('click', () => {
    // cambia ordine
    sortOrder = sortOrder === "asc" ? "desc" : "asc";
    sortBtn.textContent = sortOrder === "asc" ? "A–Z" : "Z–A";

    // micro animazione anime ✨
    sortBtn.classList.add('pulse');
    setTimeout(() => sortBtn.classList.remove('pulse'), 250);

    // re-render
    renderArtworks(activeCategory);
});

// --- Lightbox ---
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightbox-img');
const lightboxClose = document.getElementById('lightbox-close');

function openLightbox(src, alt) {
    lightboxImg.src = src;
    lightboxImg.alt = alt;
    lightbox.style.display = 'flex';
}

function closeLightbox() {
    lightbox.style.display = 'none';
    lightboxImg.src = '';
}

lightboxClose.addEventListener('click', closeLightbox);
lightbox.addEventListener('click', (e) => { if(e.target===lightbox) closeLightbox(); });

// Disabilita click destro sul lightbox
lightbox.addEventListener('contextmenu', (e) => {
    e.preventDefault();
});

function attachLightboxListeners() {
    document.querySelectorAll('.image-large img').forEach(img => {
        img.style.cursor = 'pointer';

        // 1️⃣ Disabilita trascinamento
        img.setAttribute('draggable', 'false');

        // 2️⃣ Click sull'immagine apre lightbox
        img.addEventListener('click', () => openLightbox(img.src, img.alt));
    });
}

// --- Avvio iniziale ---
//renderArtworks();
